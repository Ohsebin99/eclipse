package joinbab.service;

import org.apache.ibatis.session.SqlSession;


import joinbab.dao.MemberDAO;
import joinbab.mybatis.MySession;
import joinbab.vo.MemberVO;

public class MemberService {

	private static MemberService instance = new MemberService();
	private MemberService() { }
	public static MemberService getInstance() {
		return instance;
	}
	
	public void insert(MemberVO vo) {
		System.out.println("MemberService의 insert()");
		SqlSession mapper = MySession.getSession();
		MemberDAO dao = MemberDAO.getInstance();
		
		dao.getInstance().insert(mapper, vo);
		
		mapper.commit();
		mapper.close();
		
	}
	
	public void login(String ID) {
		System.out.println("MemberService의 login()");
		SqlSession mapper = MySession.getSession();
		MemberDAO dao = MemberDAO.getInstance();
		
		dao.getInstance().login(mapper, ID);
		
		mapper.commit();
		mapper.close();
	}
	
	public int IDCheck(String ID) {
		System.out.println("MemberService의 IDCheck()");
		SqlSession mapper = MySession.getSession();
		MemberDAO dao = MemberDAO.getInstance();
		int result;
		int count = dao.getInstance().IDCheck(mapper, ID);
		
		
		result = count > 0 ? 1 : 2;
		System.out.println(result);
		mapper.commit();
		mapper.close();
		
		return result;
	}
	
}





